<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whisky Creek Ramblers Band</title>
    <meta name="description" content="Whiskey Creek Ramblers Band - Americana, Country and Bluegrass music.">
    <meta name="keywords" content="Whiskey Creek Ramblers, Americana, Country, Bluegrass, Music Band">
    <meta name="author" content="Whiskey Creek Ramblers">

    <!-- Add favicon link -->
    <link rel="icon" href="favicon.png" type="image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container px-0">
        <div class="header">
            <div class="header-content">
                <img src="assets/svg/logo-white.svg" class="logo" />
            </div>
        </div>
        <nav class="menu fs-4">
            <ul>
                <li>
                    <button class="unstyled-button active" data-menu-index="0">
                        about
                    </button>
                </li>
                <li><img src="assets/svg/asterisk.svg" style="width: 0.75rem;" /></li>
                <li>
                    <button class="unstyled-button" data-menu-index="1">
                        songs
                    </button>
                </li>
                <li><img src="assets/svg/asterisk.svg" style="width: 0.75rem;" /></li>
                <li>
                    <button class="unstyled-button" data-menu-index="2">
                        affiliations
                    </button>
                </li>
            </ul>
        </nav>

        <div class="content">
            <div id="pageCarousel" class="carousel slide">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <h1>about</h1>

                        <p>The Whisky Creek Ramblers are Jeff Sciscilo and Bryan Hadro, two musicians from Northern Virginia area who have been playing together for nearly 25 years.</p>
                        <p>They specialize in playing Americana Rock, Country and Bluegrass covers and originals.</p>
                        <p>For inquiries, please reach out via email: <a href="mailto:whiskycreekramblers@gmail.com?subject=Whisky%20Creek%20Ramblers%20Inquiry">whiskycreekramblers@gmail.com</a></p>
                        <p>Ramble on!</p>
                    </div>
                    <div class="carousel-item">
                        <h1>songs</h1>

                            <table id="set-list-table" class="table table-striped">
                                <thead>
                                <tr>
                                    <th>
                                    <button class="unstyled-button active" data-sort="title">
                                        <span class="label">Song</span>
                                    </button>
                                    </th>
                                    <th>
                                    <button class="unstyled-button" data-sort="artist">
                                        <span class="label">Artist</span>
                                    </button>
                                    </th>
                                </tr>
                                </thead>
                                <tbody></tbody>
                          </table>
                    </div>
                    <div class="carousel-item">
                        <h1>affiliations</h1>
                        <p>Jeff and Bryan are also members of the 50's/60's/70's cover band, "Three Strikes." Checkout their website for more info: <a href="http://threestrikesband.com" target="_bank">www.ThreeStrikesBand.com</a></p>
                    </div>
                </div>
            </div>
        </div>
        <footer>
            <div class="footer-content">
                &copy; Whisky Creek Ramblers 2024
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
    <script>
    (function(bootstrap) {

        const CAROUSEL = new bootstrap.Carousel(
            document.querySelector('#pageCarousel'),
            { "interval": false }
        );

        const MENU_BUTTONS = document.querySelectorAll(".menu button");
        const SET_LIST_TBODY = document.querySelector("#set-list-table tbody");
        const SORT_BUTTONS = document.querySelectorAll("#set-list-table thead th button");
        let SET_LIST_DATA = {};

        function renderSetList(sortBy) {

            sortBy = typeof sortBy==="undefined" ? "title" : sortBy;
            SET_LIST_TBODY.innerHTML = "";

            const data = SET_LIST_DATA.data || [];

            data.sort(function (a, b) {
                /* theoretically should never be equal and have to return 0 */

                // ignore "The"
                const toIgnore = new RegExp(/^the\s/i);
                const v1 = a[sortBy].replace(toIgnore, '');
                const v2 = b[sortBy].replace(toIgnore, '');

                return (v1 < v2) ? -1 : 1;
            });

            data.forEach((item) => {
                const row = document.createElement("tr");
                const col1 = document.createElement("td");
                col1.innerHTML = item.title

                const col2 = document.createElement("td");
                col2.innerHTML = item.artist;

                row.appendChild(col1);
                row.appendChild(col2);
                SET_LIST_TBODY.appendChild(row);
            });
        }

        // fetch the set list
        fetch('./setlist.json').then((resp) => {
            if (resp.status === 200) {
                return resp.json();
            } else {
                console.error(resp.statusText);
            }
        }).then((data) => {
            SET_LIST_DATA = data;
            renderSetList();
        });

        function handleSortButtonClick(button) {

            // remove active class for array styling
            Array.prototype.forEach.call(SORT_BUTTONS, function(node) {
                node.classList.remove("active");
            });
            button.classList.add("active");

            const sortBy = button.dataset.sort;
            renderSetList(sortBy);
        }
        Array.prototype.forEach.call(document.querySelectorAll("#set-list-table thead th button"), function(node) {
          node.addEventListener("click", function() { handleSortButtonClick(node); });
        });

        function handleMenuButtonClick(event) {
            event.preventDefault();

            const button = event.target;

            const i = parseInt(button.dataset.menuIndex);

            CAROUSEL.to(i);

            document.querySelector(".menu button.active").classList.remove("active");
            button.classList.add("active");
        }
        Array.prototype.forEach.call(MENU_BUTTONS, (item) => {
            item.addEventListener("click", handleMenuButtonClick);
        })


    }(bootstrap));
    </script>
</body>
</html>